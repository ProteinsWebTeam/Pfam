
# pfamweb.conf
# jt6 20060919 WTSI
#
# This is the conf-format configuration file for the Pfam website
# catalyst application.
#
# $Id: rfamweb.conf,v 1.3 2008-06-24 08:55:09 jt6 Exp $
#
# Copyright (c) 2007: Genome Research Ltd.
#
# Authors: Rob Finn (rdf@sanger.ac.uk), John Tate (jt6@sanger.ac.uk)
#
# This is free software; you can redistribute it and/or modify it under
# the terms of the GNU General Public License as published by the Free Software
# Foundation; either version 2 of the License, or (at your option) any later
# version.
#
# This program is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
# FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
# details.
#
# You should have received a copy of the GNU General Public License along with
# this program. If not, see <http://www.gnu.org/licenses/>.

#-------------------------------------------------------------------------------
#- top-level configuration -----------------------------------------------------
#-------------------------------------------------------------------------------

# the name of the application
name RfamWeb
title Rfam # the prefix that appears in the browser tab or window title

# tell the PageCache plugin to add cache control headers
<page_cache>
  set_http_headers 1
</page_cache>

# configure a memcached test setup
<cache>
  # we can use two different caching mechanisms:
  #  FastMmap:         uses a memory mapped file and can only be used sensibly 
  #                    on a single web server machine
  #  Cache::Memcached: uses a farm of cache machines and can be used from 
  #                    multiple web server machines
  
  # use Cache::FastMmap as the backend
#  <backend>
#    class Cache::FastMmap
#  </backend>

  # use Cache::Memcached as the backend
  <backends>
    <default>
      class Cache::Memcached
      servers "1.2.3.2:11211"
      servers "1.2.3.3:11211"
      servers "1.2.3.4:11211"
      servers "1.2.3.5:11211"
      servers "1.2.3.6:11211"
      servers "1.2.3.7:11211"
      servers "1.2.3.8:11211"
      servers "1.2.3.9:11211"
      servers "1.2.3.10:11211"
      namespace development
    </default>
  </backends>
</cache>

# includes...

# read in the changelog
include changelog.conf

# read in the robots.txt file
include robots/wtsi.conf


#-------------------------------------------------------------------------------
#- model configuration ---------------------------------------------------------
#-------------------------------------------------------------------------------


<Model PfamDB>
  # RfamDB schema settings
  schema_class "RfamDB"
  connect_info "dbi:mysql:database=rfam_8_1;host=host;port=3306"
  connect_info rfamwebro
  connect_info password
</Model>

<Model WebUser>
  # WebUser schema settings
  schema_class "WebUser"
  connect_info "dbi:mysql:database=web_user;host=host;port=3306"
  connect_info webuser
  connect_info password
  <connect_info>
    AutoCommit 1
  </connect_info>
</Model>


#-------------------------------------------------------------------------------
#- view configuration ----------------------------------------------------------
#-------------------------------------------------------------------------------


<View TT>

  # set the location of the directory that will contain the template files
  INCLUDE_PATH "/var/httpd/RfamWeb/root"

  # enable caching of the compiled templates
#  COMPILE_DIR /tmp/rfam

  # use a single template to wrap around the content. This contains
  # all of the header and footer mark-up which was previously in 
  # separate header.tt and footer.tt files
  WRAPPER "components/wrapper.tt"

  # allow perl expressions in the templates
  EVAL_PERL 1

  # allow TT to look for files along absolute paths
  ABSOLUTE 1

  # fixed values...
  <CONSTANTS>

    # the URL for the top-level tmp directory. This is where, for example,
    # we can find the auto-generated domain graphics
    tmp  "/tmp"

    # the root directory for the server, from the client's perspective. This is used
    # in the cookie handling routines for building the correct path
    root "/catalyst/rfam"

    # this controls the appearance of the table of families in the alignment tab of
    # the clans section. If there are more than this number of families, the table 
    # will be split into two columns
    tableLength 20
  </CONSTANTS>

  # I guess these are pre-defined but changeable variables...
  <VARIABLES>

    # these are the available block templates
    <blocks>

      # family-specific blocks
      familySummaryBlock  "components/blocks/family/summary.tt"
#      wikiBlock           "components/blocks/family/wiki.tt"
      alignBlock          "components/blocks/family/align.tt"
      familySSBlock       "components/blocks/family/secondary_structure.tt"
      speciesBlock        "components/blocks/family/species.tt"
      domainsBlock        "components/blocks/family/domains.tt"
      curationBlock       "components/blocks/family/curation.tt"
      phyloBlock          "components/blocks/family/phylo.tt"

#       wikiFrameBlock      "components/blocks/family/wiki_frame.tt"
#       clanBlock           "components/blocks/family/clan.tt" 
#       speciesBlock        "components/blocks/family/species.tt"
#       pdbBlock            "components/blocks/family/pdb.tt"
#       dbRefsBlock         "components/blocks/family/dbRefs.tt"
#       ipfamBlock          "components/blocks/family/interactions.tt"

#       # clan-specific blocks
#      clanSummaryBlock       "components/blocks/clan/summary.tt"
#      clanRelationshipsBlock "components/blocks/clan/relationships.tt"
#      clanStructuresBlock    "components/blocks/clan/structures.tt"
#      clanDomainsBlock       "components/blocks/clan/domains.tt"
#      clanSpeciesBlock       "components/blocks/clan/species.tt"
#      clanAlignmentsBlock    "components/blocks/clan/alignments.tt"
#      clanInteractionsBlock  "components/blocks/clan/interactions.tt"
# 
#       # protein-specific blocks
#      proteinSummaryBlock      "components/blocks/protein/summary.tt"
#      proteinGraphicsBlock     "components/blocks/protein/graphics.tt"
#      proteinSIMAPBlock        "components/blocks/protein/simap.tt"
#      proteinSequenceBlock     "components/blocks/protein/sequence.tt"
#      proteinStructureBlock    "components/blocks/protein/structure.tt"
#      proteinInteractionsBlock "components/blocks/protein/interactions.tt"
#      proteinTreeFamBlock      "components/blocks/protein/treefam.tt"
# 
#       # structure-specific blocks
#       structureSummaryBlock  "components/blocks/structure/summary.tt"
#       structureSequenceBlock "components/blocks/structure/sequence.tt"
#       structureIntBlock      "components/blocks/structure/interactions.tt"
#       structureDomainsBlock  "components/blocks/structure/getDomains.tt"
#       structureMappingBlock  "components/blocks/structure/mapping.tt"
#       structureViewBlock     "components/blocks/structure/view.tt"
# 
#       # PfamB blocks
#       pfambSummaryBlock   "components/blocks/pfamb/summary.tt"
#       pfambDomainsBlock   "components/blocks/pfamb/domains.tt"
#       pfambAlignBlock     "components/blocks/pfamb/align.tt"
#       pfambSpeciesBlock   "components/blocks/pfamb/species.tt"
#       pfambStructureBlock "components/blocks/pfamb/structure.tt"
# 
#       # proteome blocks
#       proteomeSummaryBlock "components/blocks/proteome/summary.tt"
#       proteomeStatsBlock   "components/blocks/proteome/stats.tt"
#       proteomeDomainsBlock "components/blocks/proteome/domains.tt"
#       proteomeStrucBlock   "components/blocks/proteome/structure.tt"

      # help pages
      helpSummaryBlock        "components/blocks/help/summary.tt"
      helpChangesBlock        "components/blocks/help/changes.tt"
      helpGetStartedBlock     "components/blocks/help/getStarted.tt"
      helpFAQBlock            "components/blocks/help/faq.tt"
      helpScoresBlock         "components/blocks/help/scores.tt"
      helpDomainGraphicsBlock "components/blocks/help/domainGraphics.tt"
      helpToolsBlock          "components/blocks/help/tools.tt"
      helpLinkingBlock        "components/blocks/help/linking.tt"
      helpReferencesBlock     "components/blocks/help/references.tt"
      helpGlossaryBlock       "components/blocks/help/glossary.tt"
      helpContactUsBlock      "components/blocks/help/contactUs.tt"
      helpTheTeamBlock        "components/blocks/help/theTeam.tt"
      helpFtpBlock            "components/blocks/help/ftp.tt"
      helpInstallBlock        "components/blocks/help/install.tt"
      helpPrivacyBlock        "components/blocks/help/privacy.tt"

      # search tools
      searchProteinBlock  "components/blocks/search/protein.tt"
      searchSequenceBlock "components/blocks/search/sequence.tt"
      searchFunshiftBlock "components/blocks/search/funshift.tt"
      searchBatchBlock    "components/blocks/search/batch.tt"
      searchKeywordBlock  "components/blocks/search/keyword.tt"
      searchDomainBlock   "components/blocks/search/domain.tt"
      searchDnaBlock      "components/blocks/search/dna.tt"
      searchTaxBlock      "components/blocks/search/tax.tt"
# 
#       # metaseq
#       metaSummaryBlock  "components/blocks/metaseq/summary.tt"
#       metaSequenceBlock "components/blocks/metaseq/sequence.tt"
# 
#       # ncbiseq
#       ncbiSummaryBlock  "components/blocks/ncbiseq/summary.tt"
#       ncbiSequenceBlock "components/blocks/ncbiseq/sequence.tt"

    </blocks>

    # configure the different sections

    <layouts>

      # ------------------------------------------------------------------------------

      <family>

        # first column is the block ID, second is the title for the sidebar. This
        # is an array rather than a simple hash because we want to specify the 
        # order of the tabs here
        <blocks>
          familySummaryBlock "Summary"
        </blocks>
#        <blocks>
#          wikiBlock          "Wikipedia"
#        </blocks>
        <blocks>
          curationBlock      "Curation"
        </blocks>
        <blocks>
          familySSBlock      "Secondary structure"
        </blocks>
        <blocks>
          speciesBlock       "Species"
        </blocks>
#        <blocks>
#          alignBlock         "Alignments"
#        </blocks>
        <blocks>
          phyloBlock         "Trees"
        </blocks>
#         <blocks>
#           wikiFrameBlock     "Wiki frame"
#         </blocks>
#         <blocks>
#           ipfamBlock         "Interactions"
#         </blocks>
#         <blocks>
#           pdbBlock           "Structures"
#         </blocks>

        # this is the mapping between the summary icons and blocks, i.e. clicking on
        # the architectures icon will display the block with ID "domainsBlock"
        <iconLinks>
          archIcon   domainsBlock
          seqIcon    alignBlock
          ipfamIcon  ipfamBlock
          specIcon   speciesBlock
          structIcon pdbBlock
        </iconLinks>

      </family>  
      
      # ------------------------------------------------------------------------------

#       <clan>
# 
#         <blocks>
#           clanSummaryBlock       "Summary"
#         </blocks>
#         <blocks>
#           clanDomainsBlock       "Domain organisation"
#         </blocks>
#         <blocks>
#           clanAlignmentsBlock    "Alignments"
#         </blocks>
#         <blocks>
#           clanRelationshipsBlock "Relationships"
#         </blocks>
#         <blocks>
#           clanSpeciesBlock       "Species"
#         </blocks>
#         <blocks>
#           clanInteractionsBlock  "Interactions"
#         </blocks>
#         <blocks>
#           clanStructuresBlock    "Structures"
#         </blocks>
# 
#         <iconLinks>
#           archIcon   clanDomainsBlock
#           seqIcon    clanAlignmentsBlock
#           ipfamIcon  clanInteractionsBlock
#           specIcon   clanSpeciesBlock
#           structIcon clanStructuresBlock
#         </iconLinks>
# 
#       </clan>

      # ------------------------------------------------------------------------------

#       <protein>
# 
#         <blocks>
#           proteinSummaryBlock      "Summary"
#         </blocks>
#         <blocks>
#           proteinGraphicsBlock     "Features"
#         </blocks>
# #        <blocks>
# #          proteinSIMAPBlock        "SIMAP"
# #        </blocks>
#         <blocks>
#           proteinSequenceBlock     "Sequence"
#         </blocks>
#         <blocks>
#           proteinInteractionsBlock "Interactions"
#         </blocks>
#         <blocks>
#           proteinStructureBlock    "Structures"
#         </blocks>
#         <blocks>
#           proteinTreeFamBlock      "TreeFam"
#         </blocks>
# 
#         <iconLinks>
#           archIcon   proteinSummaryBlock
#           seqIcon    proteinSequenceBlock
#           ipfamIcon  proteinInteractionsBlock
#           specIcon   proteinSummaryBlock
#           structIcon proteinStructureBlock
#         </iconLinks>
# 
#       </protein>

      # ------------------------------------------------------------------------------

#       <structure>
# 
#         <blocks>
#           structureSummaryBlock  "Summary"
#         </blocks>
#         <blocks>
#           structureSequenceBlock "Domain organisation"
#         </blocks>
#         <blocks>
#           structureIntBlock      "Interactions"
#         </blocks>
# #        <blocks>
# #          structureDomainsBlock  "Structural domains"
# #        </blocks>
#         <blocks>
#           structureMappingBlock  "Sequence mapping"
#         </blocks>
#         <blocks>
#           structureViewBlock     "View structure"
#         </blocks>
# 
#         <iconLinks>
#           archIcon   structureSequenceBlock
#           seqIcon    structureMappingBlock
#           ipfamIcon  structureIntBlock
#           specIcon   structureSummaryBlock
#           structIcon structureViewBlock
#         </iconLinks>
# 
#       </structure>

      # ------------------------------------------------------------------------------

#       <pfamb>
# 
#         <blocks>
#           pfambSummaryBlock   "Summary"
#         </blocks>
#         <blocks>
#           pfambDomainsBlock   "Domain organisation"
#         </blocks>
#         <blocks>
#           # NOTE ! Using the alignment block from the family section
#           alignBlock     "Alignments"
#         </blocks>
#         <blocks>
#           pfambSpeciesBlock   "Species"
#         </blocks>
#         <blocks>
#           pfambStructureBlock "Structures"
#         </blocks>
# 
#         <iconLinks>
#           archIcon   pfambDomainsBlock
#           # NOTE ! Using the alignment block from the family section
#           seqIcon    alignBlock
#           ipfamIcon  none
#           specIcon   pfambSpeciesBlock
#           structIcon pfambStructureBlock
#         </iconLinks>
# 
#       </pfamb>

      # ------------------------------------------------------------------------------

#       <proteome>
# 
#         <blocks>
#            proteomeSummaryBlock "Summary"
#         </blocks>
#         <blocks>
#            proteomeDomainsBlock "Domain organisation"
#         </blocks>
#         <blocks>
#            proteomeStatsBlock   "Domain composition"
#         </blocks>
#         <blocks>
#            proteomeStrucBlock   "Structures"
#         </blocks>
# 
#         <iconLinks>
#           archIcon   proteomeDomainsBlock
#           seqIcon    proteomeStatsBlock
#           ipfamIcon  none
#           specIcon   proteomeSummaryBlock
#           structIcon proteomeStrucBlock
#         </iconLinks>
# 
#       </proteome>

      # ------------------------------------------------------------------------------

      <help>

        <blocks>
          helpSummaryBlock        "Summary"
        </blocks>
        <blocks>
          helpChangesBlock        "Changes"
        </blocks>
        <blocks>
          helpGetStartedBlock     "Getting Started"
        </blocks>
        <blocks>
          helpFAQBlock            "FAQ"
        </blocks>
        <blocks>
          helpScoresBlock         "Scores"
        </blocks>
        <blocks>
          helpDomainGraphicsBlock "Guide to Graphics"
        </blocks>
        <blocks>
          helpToolsBlock          "Tools &amp; Services"
        </blocks>
        <blocks>
          helpLinkingBlock        "Linking to Pfam"
        </blocks>
        <blocks>
          helpFtpBlock            "FTP site"
        </blocks>
        <blocks>
          helpReferencesBlock     "Citing Pfam"
        </blocks>
        <blocks>
          helpGlossaryBlock       "Glossary"
        </blocks>
        <blocks>
          helpTheTeamBlock        "Team Members"
        </blocks>
        <blocks>
          helpInstallBlock        "Website installation"
        </blocks>
        <blocks>
          helpPrivacyBlock        "Privacy"
        </blocks>
        <blocks>
          helpContactUsBlock      "Contact Us"
        </blocks>   
      </help>
    
      # ------------------------------------------------------------------------------

      <search>

#        <blocks>
#          searchProteinBlock  "Protein ID/accession"
#        </blocks>
        <blocks>
          searchSequenceBlock "Sequence"
        </blocks>
        <blocks>
          searchFunshiftBlock "Functional similarity"
        </blocks>
        <blocks>
          searchBatchBlock    "Batch search"
        </blocks>
        <blocks>
          searchKeywordBlock  "Keyword"
        </blocks>
        <blocks>
          searchDomainBlock   "Domain architecture"
        </blocks>
        <blocks>
          searchDnaBlock      "DNA sequence"
        </blocks>
        <blocks>
          searchTaxBlock      "Taxonomy"
        </blocks>

      </search>
    
      # ------------------------------------------------------------------------------
    
      <metaseq>

        <blocks>
          metaSummaryBlock "Summary"
        </blocks>
        <blocks>
          metaSequenceBlock "Sequence"
        </blocks>

        <iconLinks>
          archIcon   metaSummaryBlock
          seqIcon    metaSequenceBlock
          ipfamIcon  none
          specIcon   none
          structIcon none
        </iconLinks>

      </metaseq>
    
      # ------------------------------------------------------------------------------
    
      <ncbiseq>

        <blocks>
          ncbiSummaryBlock "Summary"
        </blocks>
        <blocks>
          ncbiSequenceBlock "Sequence"
        </blocks>

        <iconLinks>
          archIcon   ncbiSummaryBlock
          seqIcon    ncbiSequenceBlock
          ipfamIcon  none
          specIcon   none
          structIcon none
        </iconLinks>

      </ncbiseq>
    
      # ------------------------------------------------------------------------------
    
    </layouts>

  </VARIABLES>

</View>


#-------------------------------------------------------------------------------
#- controller configuration ----------------------------------------------------
#-------------------------------------------------------------------------------


# none


#-------------------------------------------------------------------------------
#- EOF -------------------------------------------------------------------------
#-------------------------------------------------------------------------------
